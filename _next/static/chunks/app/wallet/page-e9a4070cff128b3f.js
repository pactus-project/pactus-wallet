(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1730],{22495:(e,s,t)=>{"use strict";t.d(s,{default:()=>T});var a,l=t(54568),i=t(7620),r=t(61773),n=t(62484),d=t(6190),c=t(67768),o=t(88443),h=t(62942),u=t(61624),x=t(89256),m=t(59280),p=t(4180),v=t(7375),f=t(60692),j=t(23187),y=t(35649),b=t(26313);let w={src:"/_next/static/media/pacview-icon.241f2d74.svg",height:144,width:144,blurWidth:0,blurHeight:0},N={src:"/_next/static/media/link-icon.2d715d30.svg",height:16,width:16,blurWidth:0,blurHeight:0};var _=t(29851);t(67378);let g=e=>{let{transactions:s,onLoadMore:t,isLoading:a,hasMore:n,height:d="100%",hasError:c=!1}=e,{t:o}=(0,p.s)(),h=(0,i.useRef)(null),u=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!a)return h.current&&h.current.disconnect(),h.current=new IntersectionObserver(e=>{e[0].isIntersecting&&n&&t()}),u.current&&h.current.observe(u.current),()=>{h.current&&h.current.disconnect()}},[a,n,t]);let x=e=>_.J0.fromString((e/1e9).toString()).format()+" PAC",m=e=>{let s=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(s)};return(0,l.jsx)("div",{className:"transactions-history shadow-inset",style:{height:d},children:(0,l.jsx)("div",{className:"transactions-history__wrapper",children:(0,l.jsx)("div",{className:"px-8 py-6",children:(0,l.jsxs)("table",{className:"transactions-history__table bg-[#15191C] rounded-md",children:[(0,l.jsx)("thead",{className:"transactions-history__header",children:(0,l.jsx)("tr",{className:"transactions-history__row",children:["Date","TX Hash","From","To","Amount","Fee"].map(e=>(0,l.jsx)("th",{className:"transactions-history__cell transactions-history__cell--header",children:e},e))})}),(0,l.jsxs)("tbody",{className:"transactions-history__body",children:[c?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"transactions-history__empty",children:o("fetchTransactionFail")})}):s.length>0?s.map((e,t)=>{var a,i,n,d,c,o;return(0,l.jsxs)("tr",{className:"transactions-history__row",ref:t===s.length-1?u:null,children:[(0,l.jsx)("td",{className:"transactions-history__cell",children:m(e.createdAt)}),(0,l.jsx)("td",{className:"transactions-history__cell transactions-history__cell--hash",children:(0,l.jsx)("a",{href:"https://pacviewer.com/transaction/".concat(e.hash),target:"_blank",children:e.hash})}),(0,l.jsxs)("td",{className:"transactions-history__cell flex",title:e.from,children:[(null===(a=e.from_address_alias)||void 0===a?void 0:a.icon)&&(0,l.jsx)(r.default,{src:e.from_address_alias.icon,alt:"",width:16,height:16,className:"mr-1"}),(0,l.jsx)("span",{className:"text-truncate",children:null!==(c=null===(i=e.from_address_alias)||void 0===i?void 0:i.title)&&void 0!==c?c:e.from})]}),(0,l.jsx)("td",{className:"transactions-history__cell",title:e.to,children:(0,l.jsxs)("div",{className:"flex",children:[(null===(n=e.to_address_alias)||void 0===n?void 0:n.icon)&&(0,l.jsx)(r.default,{src:e.to_address_alias.icon,alt:"",width:16,height:16,className:"mr-1"}),(0,l.jsx)("span",{className:"text-truncate",children:null!==(o=null===(d=e.to_address_alias)||void 0===d?void 0:d.title)&&void 0!==o?o:e.to})]})}),(0,l.jsx)("td",{className:"transactions-history__cell",children:x(e.value)}),(0,l.jsx)("td",{className:"transactions-history__cell",children:x(e.fee)})]},t)}):a?null:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"transactions-history__empty",children:o("noTransactionFound")})}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,children:(0,l.jsx)(b.A,{width:"100%",height:"34px"})})}),(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,children:(0,l.jsx)(b.A,{width:"100%",height:"34px"})})}),(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,children:(0,l.jsx)(b.A,{width:"100%",height:"34px"})})})]})]})]})})})})},A={url:null!==(a=t(40459).env.NEXT_PUBLIC_PACVIEWER_API_URL)&&void 0!==a?a:"https://api.pacviewer.com"},C=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;console.log("address",A.url);let a=await fetch("".concat(A.url,"/v1/accounts/").concat(e,"/txs?page_no=").concat(s,"&page_size=").concat(t));if(!a.ok)throw Error("Failed to fetch transactions");return a.json()};var S=t(26680),k=t(96494);let T=()=>{var e,s,t,a,_,A,T,P;let{wallet:E,setHeaderTitle:F}=(0,i.useContext)(m.bI),[I,K]=(0,i.useState)(!1),[H,O]=(0,i.useState)(!1),[D,q]=(0,i.useState)(!1),{getAccountByAddress:L}=(0,o.useAccount)(),U=(0,h.useSearchParams)(),R=null!==(t=null==U?void 0:U.get("address"))&&void 0!==t?t:"",W=R?L(R):null,{balance:z,isLoading:J}=(0,u.A)(null==W?void 0:W.address),{t:V}=(0,p.s)(),[M,Q]=(0,i.useState)([]),[X,B]=(0,i.useState)(1),[Y,G]=(0,i.useState)(!0),[Z,$]=(0,i.useState)(!1),[ee,es]=(0,i.useState)(!1),et=(0,i.useCallback)(async()=>{if((null==W?void 0:W.address)&&!Z&&Y){$(!0),es(!1);try{let{data:{data:e,total_items:s}}=await C(W.address,X);Q(s=>[...s,...e]),G(M.length+e.length<s),B(e=>e+1)}catch(e){console.error("Failed to load transactions:",e),es(!0)}finally{$(!1)}}},[null==W?void 0:W.address,X,Y,Z,M.length]);return(0,i.useEffect)(()=>{Q([]),B(1),G(!0),es(!1),et()},[null==W?void 0:W.address]),(0,i.useEffect)(()=>{var e;F("\uD83E\uDD1D ".concat(null!==(e=null==W?void 0:W.label)&&void 0!==e?e:""))},[null==W?void 0:W.label,F]),(0,l.jsxs)(i.Suspense,{fallback:(0,l.jsx)("div",{children:V("loading")}),children:[(0,l.jsxs)("div",{className:"pt-4 px-4 md:px-7 pb-7",children:[(0,l.jsx)("section",{className:"w-full ml-auto bg-surface-medium rounded-md shadow-inset",children:(0,l.jsxs)("div",{className:"flex gap-4 md:gap-6 p-4 md:p-6 w-full",children:[(0,l.jsxs)("div",{className:"relative h-fit",children:[(0,l.jsx)("div",{className:"flex flex-col justify-center bg-white rounded-md p-4 w-[214px] h-[214px] min-w-[214px] min-h-[214px]",children:(0,l.jsx)(f.Ay,{value:(0,S.u)(null!==(a=null==W?void 0:W.address)&&void 0!==a?a:""),level:"H",size:214,"aria-label":"QR code for wallet address",className:"rounded-md w-full h-full"})}),(0,l.jsx)("div",{className:"absolute top-1/2 left-1/2 w-[48px] h-[48px] rounded-full overflow-hidden bg-white flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2",children:(0,l.jsx)(r.default,{unoptimized:!0,src:n._T,alt:"",width:40,height:40})})]}),(0,l.jsxs)("div",{className:"w-full flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(v.A,{variant:"body1",color:"text-quaternary",className:"font-medium",children:V("balance")}),(0,l.jsx)("button",{className:"ml-auto",onClick:()=>{O(!0)},title:V("showPrivateKey"),children:(0,l.jsx)(r.default,{src:n.W0,alt:"",width:24,height:24})})]}),J?(0,l.jsx)(b.A,{width:"100px",height:"30px"}):(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.default,{src:n.y0,alt:"Pactus logo"}),(0,l.jsx)(v.A,{variant:"h1",color:"text-quaternary",className:"font-medium text-[24px] md:text-[30px]",children:z}),(0,l.jsx)(v.A,{variant:"h2",color:"text-disabled",className:"font-medium mt-1",children:"PAC"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 pt-4",children:[(0,l.jsxs)(v.A,{variant:"caption1",color:"text-quaternary",children:[V("accountAddress"),":"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{variant:"caption1",className:"break-all",children:null!==(_=null==W?void 0:W.address)&&void 0!==_?_:""}),(0,l.jsx)("button",{onClick:()=>{var e;navigator.clipboard.writeText(null!==(e=null==W?void 0:W.address)&&void 0!==e?e:""),K(!0),setTimeout(()=>K(!1),2e3)},"aria-label":"Copy address to clipboard",title:"Copy address to clipboard",className:"flex-shrink-0 w-fit",children:(0,l.jsx)(r.default,{src:I?n.FU:n.nJ,alt:I?"Copied successfully":"Copy to clipboard",width:25,height:25})}),(0,l.jsx)("button",{onClick:()=>q(!0),title:V("showPublicKey"),className:"flex-shrink-0 w-fit",children:(0,l.jsx)(r.default,{src:N,alt:"",width:24,height:24})})]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 pt-4",children:[(0,l.jsx)(d.A,{address:null!==(A=null==W?void 0:W.address)&&void 0!==A?A:""}),(0,l.jsx)(c.A,{}),(0,l.jsx)(j.A,{variant:"secondary",size:"small",onClick:()=>{(null==E?void 0:E.isTestnet())?window.open("".concat(k.LQ.TESTNET,"/address/").concat(R),"_blank"):window.open("".concat(k.LQ.MAINNET,"/address/").concat(R),"_blank")},"aria-label":V("bridge"),className:"w-fit h-[38px]",fullWidth:!0,startIcon:(0,l.jsx)(r.default,{src:w,alt:"",width:20,height:20,"aria-hidden":"true"}),children:V("checkOnExplorer")})]})]})]})}),(0,l.jsx)("section",{className:"w-full ml-auto bg-surface-medium rounded-md mt-4",children:(0,l.jsx)("div",{children:(0,l.jsx)(g,{transactions:M,onLoadMore:et,isLoading:Z,hasMore:Y,hasError:ee})})})]}),(0,l.jsx)(x.A,{isOpen:H,onClose:()=>O(!1),address:null!==(T=null==W?void 0:W.address)&&void 0!==T?T:""}),(0,l.jsx)(y.A,{isOpen:D,onClose:()=>q(!1),privateKeyHex:null!==(P=null==E?void 0:null===(e=E.getAddressInfo(R))||void 0===e?void 0:e.publicKey)&&void 0!==P?P:"",title:V("showPublicKey"),label:V("publicKey"),copyTitle:V("copyPublicKey"),extraInfo:null==E?void 0:null===(s=E.getAddressInfo(R))||void 0===s?void 0:s.path,extraInfoTitle:V("hdPath"),extraInfoCopyTitle:V("copyHDPath")})]})}},26498:(e,s,t)=>{Promise.resolve().then(t.bind(t,22495))},35649:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(54568),l=t(7620),i=t(40692);t(46224);var r=t(62484),n=t(61773),d=t(7375);let c=e=>{let{isOpen:s,onClose:t,privateKeyHex:c,title:o,label:h,copyTitle:u,extraInfo:x,extraInfoTitle:m,extraInfoCopyTitle:p}=e,[v,f]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),b=e=>{navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)},w=e=>{navigator.clipboard.writeText(e),y(!0),setTimeout(()=>y(!1),2e3)};return(0,a.jsxs)(i.A,{isOpen:s,onClose:t,title:o,children:[(0,a.jsxs)("div",{className:"info-field pl-1 pr-1",children:[(0,a.jsx)(d.A,{variant:"body2",color:"text-quaternary",className:"pb-2 font-bold",children:h}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{variant:"caption2",color:"text-quaternary",className:"pb-2",children:c}),(0,a.jsx)("button",{className:"wallet_info-copy-button",onClick:()=>b(c),"aria-label":u,title:u,children:(0,a.jsx)(n.default,{src:v?r.FU:r.nJ,alt:v?"Copied successfully":"Copy to clipboard",width:25,height:25})})]})]}),x&&(0,a.jsxs)("div",{className:"info-field pl-1 pr-1",children:[(0,a.jsx)(d.A,{variant:"body2",color:"text-quaternary",className:"pb-2 font-bold",children:m}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{variant:"caption2",color:"text-quaternary",className:"pb-2",children:x}),(0,a.jsx)("button",{className:"wallet_info-copy-button",onClick:()=>w(x),"aria-label":p,title:p,children:(0,a.jsx)(n.default,{src:j?r.FU:r.nJ,alt:j?"Copied successfully":"Copy to clipboard",width:25,height:25})})]})]})]})}},37689:()=>{},46224:()=>{},67378:()=>{},89256:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var a=t(54568),l=t(7620),i=t(40692);t(37689);var r=t(59280),n=t(35649),d=t(7375),c=t(23187),o=t(60351),h=t(4180),u=t(8514);let x=e=>{var s;let{isOpen:t,onClose:x,address:m}=e,[p]=(0,u.mN)(),v=(0,u.FH)("password",p)||"",[f,j]=(0,l.useState)(!1),[y,b]=(0,l.useState)(!1),[w,N]=(0,l.useState)(null),[_,g]=(0,l.useState)(""),{getAddressInfo:A}=(0,r.F7)(),{t:C}=(0,h.s)(),[S,k]=(0,l.useState)(!1);l.useEffect(()=>{t||(p.resetFields(),k(!1),g(""),j(!1))},[t,p]);let T=e=>{var s,t,a,l;N({...e,address:null!==(s=e.address)&&void 0!==s?s:"",publicKey:null!==(t=e.publicKey)&&void 0!==t?t:"",path:null!==(a=e.path)&&void 0!==a?a:"",label:null!==(l=e.label)&&void 0!==l?l:""}),b(!0)},P=async()=>{try{j(!0);let e=await A(v,m);if(!e)throw Error("Failed to get address info");T(e),x()}catch(e){g("".concat(e))}finally{j(!1)}},E=f||!v.trim();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.A,{isOpen:t,onClose:x,title:"Password",children:[(0,a.jsxs)(u.lV,{className:"modal-input-container pl-1 pr-1",form:p,initialValues:{password:""},onFinish:P,children:[(0,a.jsx)(d.o,{variant:"caption1",className:"p-1 mb-2",children:C("toShowPrivateKey")}),(0,a.jsx)(o.A,{id:"password",onChange:()=>{k(!0)},placeholder:C("enterYourPassword"),label:C("password"),hideLabel:!0,touched:S,error:""})]}),(0,a.jsxs)("div",{className:"add-account-actions pl-1 pr-1",children:[_&&(0,a.jsx)("p",{id:"password-error",className:"modal-error-text",role:"alert",children:_}),(0,a.jsx)(c.A,{variant:"primary",disabled:E,onClick:()=>P(),type:"button",className:"w-[86px] h-[38px] ml-auto",labelClassName:"text-sm",children:f?"Verifying...":"Show"})]})]}),w&&(0,a.jsx)(n.A,{isOpen:y,onClose:()=>b(!1),addressInfo:w,privateKeyHex:null!==(s=w.privateKeyHex)&&void 0!==s?s:"",title:C("showPrivateKey"),label:C("privateKey"),copyTitle:C("copyPrivateKey")})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8718,6688,7131,4087,6539,3473,607,1e3,3372,1874,7657,692,4013,6801,4801,587,8315,7358],()=>s(26498)),_N_E=e.O()}]);