"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3235],{6190:(e,a,t)=>{t.d(a,{A:()=>L});var l=t(54568),s=t(62484),r=t(61773),n=t(7620),i=t(4180),c=t(23187),o=t(40692),d=t(88443);let u=e=>{let{children:a,className:t="",...s}=e;return(0,l.jsx)("span",{className:"bg-gradient-primary bg-clip-text text-transparent font-medium font-primary text-xs ".concat(t),...s,children:a})};var m=t(24083);let x=e=>{let{value:a,onChange:t,maxLength:s=64,placeholder:n="Enter memo (optional)",id:i="memo",name:c="memo",className:o="",disabled:d=!1,required:x=!1,onBlur:h,label:f="Memo",hideLabel:p=!1,showLogo:g=!1,labelClassName:v=""}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[!p&&f&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("label",{htmlFor:i,className:"text-sm font-medium text-quaternary ".concat(v),children:f}),g&&(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("span",{className:"text-sm font-medium text-quaternary",children:["(",(0,l.jsx)(r.default,{src:m.y,alt:"Pactus logo",className:"w-5 h-5 inline-block"}),")"]})})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",id:i,name:c,value:a,onChange:t,onBlur:h,className:"w-full p-3 rounded-md bg-background text-text-primary text-sm border border-border focus:outline-none focus:border-primary ".concat(o),placeholder:n,maxLength:s,disabled:d,required:x}),(0,l.jsxs)(u,{className:"absolute right-3 bottom-3",children:[null==a?void 0:a.length,"/",s]})]})]})};var h=t(57798);let f=e=>{let{value:a,onChange:t,maxLength:s=64,placeholder:r="Enter memo (optional)",id:n="memo",name:i="memo",className:c="",disabled:o=!1,required:d=!1,onBlur:u,label:m="Memo",hideLabel:f=!1,rules:p}=e;return(0,l.jsx)(h.A,{name:i,className:"flex flex-col gap-1",rules:p,children:(0,l.jsx)(x,{value:a,onChange:t,maxLength:s,placeholder:r,id:n,name:i,className:c,disabled:o,required:d,onBlur:u,label:m,hideLabel:f})})};var p=t(82098),g=t(69684),v=t(60351),b=t(61624),j=t(77153),w=t(29851);function N(){let{wallet:e}=(0,j.v)(),[a,t]=(0,n.useState)(!1),[l,s]=(0,n.useState)(null),[r,i]=(0,n.useState)(null);return{getSignTransferTransaction:(0,n.useCallback)(async a=>{let{fromAddress:l,toAddress:r,amount:n,fee:c,memo:o="",password:d}=a;t(!0),s(null),i(null);try{if(!e)throw Error("Wallet is not available");if(!l||!r||!n||!c||!d)throw Error("Missing required transaction parameters");let a=w.J0.fromString(n),t=w.J0.fromString(c),s=await e.getSignTransferTransaction(l,r,a,t,o,d);return i(s.signedRawTxHex),s}catch(e){throw s(e instanceof Error?e.message:"Failed to send transaction"),e}finally{t(!1)}},[e]),broadcastTransaction:(0,n.useCallback)(async a=>{t(!0),s(null);try{if(!e)throw Error("Wallet is not available");if(!a)throw Error("Missing signed transaction data");let t=await e.broadcastTransaction(a);return i(t),t}catch(e){throw s(e instanceof Error?e.message:"Failed to broadcast transaction"),e}finally{t(!1)}},[e]),isLoading:a,error:l,txHash:r}}var y=t(59280),k=t(8514);let A=e=>{var a;let{onSubmit:t,onPreviewTransaction:s,submitButtonText:r="Next",isLoading:o=!1,setIsLoading:m,isOpen:x=!0,forceReset:h=0}=e,[j]=(0,k.mN)(),w=(0,k.FH)("fromAccount",j),A=(0,k.FH)("fee",j),C=(0,k.FH)("receiver",j),S=(0,k.FH)("amount",j),F=(0,k.FH)("password",j),T=(0,k.FH)("transactionType",j),{showLoadingDialog:E,hideLoadingDialog:B}=(0,n.useContext)(y.bI),{getAccountList:L}=(0,d.useAccount)(),q=L(),{t:M}=(0,i.s)(),{getSignTransferTransaction:D}=N(),{balance:R,fetchBalance:V,isLoading:H}=(0,b.A)(w),[z,P]=(0,n.useState)(null),[O,I]=(0,n.useState)(!1),W=o||O;(0,n.useEffect)(()=>{x||j.resetFields()},[x,q]),(0,n.useEffect)(()=>{h>0&&j.resetFields()},[h]),(0,n.useEffect)(()=>{w&&V(null,w)},[w,V]);let _=async e=>{try{let{fromAccount:a,receiver:l,amount:r,fee:n,memo:i,password:c}=e;P(null),m?(m(!0),E(M("transactionLoading"))):I(!0);let o=await D({fromAddress:a||"",toAddress:l||"",amount:r||"",fee:n||"",memo:i||"",password:c||""});j.resetFields(),s?s(e,o.signedRawTxHex):t&&t(e)}catch(e){P(e.message)}finally{m?(m(!1),B()):I(!1)}},K=q.map(e=>({value:e.address,label:"\uD83E\uDD1D ".concat(e.name)})),J=w&&C&&S&&A&&F&&w!==C;return(0,l.jsxs)(k.lV,{className:"flex flex-col gap-5 w-full px-2",form:j,initialValues:{transactionType:"TRANSFER",fromAccount:(null===(a=q[0])||void 0===a?void 0:a.address)||"",receiver:"",amount:"",fee:"0.01",memo:"",password:""},onFinish:_,children:[(0,l.jsx)(g.A,{id:"transactionType",name:"transactionType",options:[{value:"TRANSFER",label:"Transfer Transaction"},{value:"BOND",label:"Bond Transaction"}],label:M("transactionType")}),(0,l.jsx)(g.A,{id:"from-account",name:"fromAccount",options:K,label:M("from")}),(0,l.jsx)(p.A,{id:"receiver",name:"receiver",placeholder:M("selectOrEnterAddress"),label:M("receiver")}),(0,l.jsx)(p.A,{id:"amount",name:"amount",placeholder:"0.00",label:"".concat(M("amount")),showLogo:!0,rightElement:(0,l.jsx)(c.A,{variant:"text",size:"small",onClick:()=>{if(R&&!H){let e=Math.max(0,R-(parseFloat(A)||.01));j.setFieldValue("amount",e.toFixed(5))}},disabled:H||!R,className:"px-2 py-1 min-w-[40px] bg-transparent hover:bg-transparent",children:(0,l.jsx)(u,{children:M("max")})})}),(0,l.jsx)(p.A,{id:"fee",name:"fee",placeholder:"0.001",label:"".concat(M("fee")),showLogo:!0,rightElement:(0,l.jsx)(c.A,{variant:"text",size:"small",onClick:()=>{j.setFieldValue("fe","0.01")},className:"px-2 py-1 min-w-[40px] bg-transparent hover:bg-transparent",children:(0,l.jsx)(u,{children:M("auto")})})}),(0,l.jsx)(f,{}),(0,l.jsx)(v.A,{id:"password",placeholder:M("enterYourPassword"),label:M("password")}),"BOND"===T?(0,l.jsx)(p.A,{id:"publicKey",name:"publicKey",placeholder:M("enterPublickey"),label:M("publicKey")}):(0,l.jsx)(l.Fragment,{}),z&&(0,l.jsx)("div",{className:"text-red-500",children:z}),(0,l.jsx)("div",{className:"flex justify-end mt-3",children:(0,l.jsx)(c.A,{variant:"primary",size:"small",type:"submit",className:"w-[86px] h-[38px]",isLoading:W,disabled:!J||W,children:r})})]})};var C=t(68175),S=t(7657);let F=e=>{let{isOpen:a,fromAccount:t,receiver:s,amount:i,fee:d,memo:u,signature:x,onConfirm:h,onClose:f,title:p="Sending",isSending:g=!1,countdown:v=0}=e,b=2*Math.PI*12,[j,w]=(0,n.useState)(0);(0,n.useEffect)(()=>{v>0&&w((10-v)/10*100)},[v]);let N=(0,C.FB)(),y=(0,n.useMemo)(()=>[N.accessor("field",{header:"Field",cell:e=>(0,l.jsx)("span",{className:"font-medium text-quaternary text-[14px]",children:e.getValue()}),size:120}),N.accessor("value",{header:"Value",cell:e=>{let a=e.getValue();return"Signature"===e.row.original.field?(0,l.jsx)("div",{className:"break-all text-xs bg-background-secondary p-1 rounded text-tertiary font-medium",children:a}):"Amount"===e.row.original.field||"Network fee"===e.row.original.field?(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"break-all text-tertiary text-[12px] font-medium",children:a}),(0,l.jsx)(r.default,{src:m.y,alt:"Pactus logo",className:"w-3 h-3 inline-block"})]}):(0,l.jsx)("span",{className:"break-all text-tertiary text-[12px] font-medium",children:a})}})],[]),k=(0,n.useMemo)(()=>{let e=[{field:"From",value:t},{field:"Receiver",value:s},{field:"Amount",value:i},{field:"Network fee",value:d}];return u&&e.push({field:"Memo",value:u}),x&&e.push({field:"Signature",value:x}),e},[t,s,i,d,u,x]),A=(0,S.N4)({data:k,columns:y,getCoreRowModel:(0,C.HT)()});return(0,l.jsx)(o.A,{isOpen:a,onClose:f,title:p,showCloseButton:!g,children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 p-2",children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("table",{className:"w-full",children:(0,l.jsx)("tbody",{children:A.getRowModel().rows.map(e=>(0,l.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{className:"py-3 ".concat("field"===e.column.id?"w-1/3 pr-4":"w-2/3"),children:(0,S.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})})}),(0,l.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:g?(0,l.jsxs)("div",{className:"flex items-center justify-end w-full gap-2",children:[(0,l.jsx)("div",{className:"flex items-center gap-2 text-primary",children:(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",children:[(0,l.jsx)("circle",{cx:"15",cy:"15",r:12,fill:"transparent",stroke:"#2D3748",strokeWidth:"2"}),(0,l.jsx)("circle",{cx:"15",cy:"15",r:12,fill:"transparent",stroke:"#0FA870",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:b,strokeDashoffset:b-j/100*b,transform:"rotate(-90 15 15)",className:"transition-all duration-300 ease-linear"}),(0,l.jsx)("text",{x:"15",y:"16",textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:v})]})})}),(0,l.jsx)(c.A,{variant:"secondary",size:"small",className:"w-[86px] h-[38px] bg-gradient-to-r from-[#EF0F0F] to-[#890909] text-white border-0",onClick:f,disabled:!0,children:"Cancel"})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.A,{variant:"primary",size:"small",className:"w-[86px] h-[38px]",onClick:h,children:"Confirm"})})})]})})};var T=t(7375),E=t(60202);let B=e=>{let{isOpen:a,onClose:t,txHash:s,amount:d,recipient:x,date:h=new Date().toLocaleString(),networkFee:f="0.001"}=e,{t:p}=(0,i.s)(),{wallet:g}=(0,y.vT)(),v=(0,C.FB)(),[b,j]=(0,n.useState)(!1),w=e=>{navigator.clipboard.writeText(e),j(!0)};(0,n.useEffect)(()=>{if(b){let e=setTimeout(()=>{j(!1)},2e3);return()=>clearTimeout(e)}},[b]);let N=(0,n.useMemo)(()=>[v.accessor("field",{header:"Field",cell:e=>(0,l.jsx)("span",{className:"text-quaternary text-sm",children:e.getValue()}),size:120}),v.accessor("value",{header:"Value",cell:e=>{let a=e.getValue(),t=e.row.original.field;return"Tx Hash"===t?(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"text-tertiary break-all text-sm",children:a}),(0,l.jsx)("button",{className:"w-10 h-10",onClick:()=>w(s),"aria-label":"Copy address to clipboard",title:"Copy address to clipboard",children:(0,l.jsx)(r.default,{src:b?E.FU:E.nJ,alt:b?"Copied successfully":"Copy to clipboard",width:20,height:20})})]}):"Network Fee"===t?(0,l.jsxs)("div",{className:"flex items-center gap-1 text-tertiary text-sm",children:[a,(0,l.jsx)(r.default,{src:m.y,alt:"Pactus logo",className:"w-3 h-3 inline-block"})]}):"Status"===t?(0,l.jsx)(u,{className:"text-sm text-left",children:a}):(0,l.jsx)("span",{className:"text-tertiary text-sm text-left",children:a})}})],[b,s]),k=(0,n.useMemo)(()=>[{field:"Tx Hash",value:s},{field:"Status",value:"Successful"},{field:"Date",value:h},{field:"Recipient",value:x},{field:"Network Fee",value:f}],[s,h,f,x]),A=(0,S.N4)({data:k,columns:N,getCoreRowModel:(0,C.HT)()});return(0,l.jsx)(o.A,{isOpen:a,onClose:t,title:p("transactionSent"),showCloseButton:!0,children:(0,l.jsxs)("div",{className:"flex flex-col items-center p-4 gap-4",children:[(0,l.jsx)("div",{className:"flex flex-col items-center gap-2 w-full",children:(0,l.jsxs)(T.A,{variant:"h1",className:"text-quaternary text-[32px] md:text-[38px]",children:["-",d," PAC"]})}),(0,l.jsx)("div",{className:"bg-background-secondary rounded-md p-4 w-full",children:(0,l.jsx)("table",{className:"w-full",children:(0,l.jsx)("tbody",{children:A.getRowModel().rows.map(e=>(0,l.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{className:"py-2 ".concat("field"===e.column.id?"w-1/3 pr-4 text-left":"w-2/3 text-left"),children:(0,S.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})})}),(0,l.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,l.jsx)(c.A,{variant:"secondary",size:"medium",className:"flex-1 invisible",onClick:t,children:p("close")}),(0,l.jsx)(c.A,{variant:"primary",size:"medium",onClick:()=>{(null==g?void 0:g.isTestnet())?window.open("https://phoenix.pacviewer.com/transaction/".concat(s),"_blank"):window.open("https://pacviewer.com/transaction/".concat(s),"_blank")},children:"View on Pacviewer"})]})]})})},L=e=>{let{address:a}=e,[t,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(0),[x,h]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1),{t:g}=(0,i.s)(),{error:v,broadcastTransaction:j}=N(),{fetchBalance:w}=(0,b.A)(),[y,k]=(0,n.useState)({}),[C,S]=(0,n.useState)(""),[T,E]=(0,n.useState)(!1),[L,q]=(0,n.useState)(0),[M,D]=(0,n.useState)(null),[R,V]=(0,n.useState)(""),H=(0,n.useRef)(null),[z,P]=(0,n.useState)(!1),[O,I]=(0,n.useState)(""),W=()=>{d(!1),p(!1),w(null,a)},_=async()=>{E(!0),q(10),H.current&&(clearInterval(H.current),H.current=null);try{let e=await j(C);V(e),H.current=setInterval(()=>{q(e=>e<=1?(H.current&&(clearInterval(H.current),H.current=null),I(new Date().toLocaleString()),h(!1),E(!1),p(!0),0):e-1)},1e3)}catch(e){console.error("Error broadcasting transaction:",e),E(!1)}};return(0,n.useEffect)(()=>{m(u+1)},[t]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A,{variant:"primary",size:"small",onClick:()=>{d(!0),D(null)},"aria-label":g("send"),startIcon:(0,l.jsx)(r.default,{src:s.AO,alt:"",width:20,height:20,"aria-hidden":"true"}),className:"w-[119px] h-[38px]",fullWidth:!0,children:g("send")}),(0,l.jsxs)(o.A,{isOpen:t,onClose:W,title:g("send"),children:[M&&(0,l.jsx)("div",{className:"bg-success bg-opacity-10 text-success p-3 mb-4 rounded",children:M}),v&&(0,l.jsx)("div",{className:"bg-error bg-opacity-10 text-error p-3 mb-4 rounded",children:v}),(0,l.jsx)(A,{isLoading:z,setIsLoading:P,initialValues:y,onPreviewTransaction:(e,a)=>{k(e),S(a),d(!1),h(!0)},submitButtonText:g(z?"loading":"next"),isOpen:t,forceReset:u})]}),(0,l.jsx)(F,{isOpen:x,fromAccount:y.fromAccount||"",receiver:y.receiver||"",amount:y.amount||"",fee:y.fee||"",memo:y.memo||"",signature:C,onConfirm:_,onClose:()=>{H.current&&(clearInterval(H.current),H.current=null),h(!1),E(!1),q(0)},title:g("previewTransaction"),isSending:T,countdown:L}),(0,l.jsx)(B,{isOpen:f,onClose:W,txHash:R,amount:y.amount||"",recipient:y.receiver||"",date:O})]})}},61624:(e,a,t)=>{t.d(a,{A:()=>r});var l=t(7620),s=t(77153);function r(e){let{wallet:a}=(0,s.v)(),[t,r]=(0,l.useState)(0),[n,i]=(0,l.useState)(!1),[c,o]=(0,l.useState)(null),d=(0,l.useCallback)(async(t,l)=>{i(!0),o(null);let s=null!=t?t:a;if(!s)return o("Wallet not available"),i(!1),0;try{let a=l||e;if(!a){let e=s.getAddresses();if(0===e.length)return r(0),i(!1),0;a=e[0].address}let t=(await s.getAddressBalance(a)).toPac();return r(t),t}catch(e){return r(0),o(e instanceof Error?e.message:"Failed to fetch balance"),0}finally{i(!1)}},[a,e]);return(0,l.useEffect)(()=>{a&&d()},[a,d]),{balance:t,isLoading:n,error:c,fetchBalance:d}}},67768:(e,a,t)=>{t.d(a,{A:()=>c});var l=t(54568),s=t(61773);t(7620);var r=t(23187),n=t(62484),i=t(4180);let c=()=>{let{t:e}=(0,i.s)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.A,{variant:"secondary",size:"small",onClick:()=>{},"aria-label":e("bridge"),startIcon:(0,l.jsx)(s.default,{src:n.Ji,alt:"",width:20,height:20,"aria-hidden":"true"}),className:"w-[119px] h-[38px]",fullWidth:!0,children:e("bridge")})})}},69684:(e,a,t)=>{t.d(a,{A:()=>n});var l=t(54568);t(7620);let s=e=>{let{value:a,onChange:t,options:s,placeholder:r,id:n,name:i,className:c="",labelClassName:o="",disabled:d=!1,required:u=!1,onBlur:m,label:x,hideLabel:h=!1}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[!h&&x&&(0,l.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-quaternary ".concat(o),children:x}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{id:n,name:i,value:a,onChange:t,onBlur:m,className:"w-full p-3 rounded-md bg-background text-tertiary \n            text-sm border border-border focus:outline-none\n             focus:border-primary appearance-none hover:bg-background\n           focus:bg-background ".concat(c),disabled:d,required:u,children:[r&&(0,l.jsx)("option",{value:"",disabled:!0,className:"text-disabled",children:r}),s.map((e,a)=>(0,l.jsx)("option",{value:e.value,className:"bg-background text-quaternary",children:e.label},"".concat(e.value,"-").concat(a)))]}),(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,l.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})};var r=t(57798);let n=e=>{let{value:a,onChange:t,options:n,placeholder:i,id:c,className:o,name:d,labelClassName:u="",disabled:m=!1,required:x=!1,onBlur:h,label:f,hideLabel:p=!1,rules:g}=e;return(0,l.jsx)(r.A,{name:d,className:"flex flex-col gap-1",rules:g,children:(0,l.jsx)(s,{value:a,onChange:t,options:n,placeholder:i,id:c,className:o,name:d,labelClassName:u,disabled:m,required:x,onBlur:h,label:f,hideLabel:p})})}},82098:(e,a,t)=>{t.d(a,{A:()=>c});var l=t(54568);t(7620);var s=t(61773),r=t(24083);let n=e=>{let{value:a,onChange:t,type:n="text",placeholder:i="",id:c,name:o,className:d="",labelClassName:u="",disabled:m=!1,required:x=!1,onBlur:h,label:f,hideLabel:p=!1,rightElement:g,autoComplete:v,showLogo:b=!1}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[!p&&f&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("label",{htmlFor:c,className:"text-sm font-medium text-quaternary ".concat(u),children:f}),b&&(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("span",{className:"text-sm font-medium text-quaternary",children:["(",(0,l.jsx)(s.default,{src:r.y,alt:"Pactus logo",className:"w-5 h-5 inline-block"}),")"]})})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:n,id:c,name:o,value:a,onChange:t,onBlur:h,className:"w-full p-3 rounded-md bg-background text-text-primary text-sm border border-border focus:outline-none focus:border-primary ".concat(g?"pr-16":""," ").concat(d),placeholder:i,disabled:m,required:x,autoComplete:v}),g&&(0,l.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:g})]})]})};var i=t(57798);let c=e=>{let{value:a,onChange:t,type:s="text",placeholder:r="",id:c,name:o,className:d="",labelClassName:u="",disabled:m=!1,required:x=!1,onBlur:h,label:f,hideLabel:p=!1,rightElement:g,autoComplete:v,showLogo:b=!1,rules:j}=e;return(0,l.jsx)(i.A,{name:o,className:"flex flex-col gap-1",rules:j,children:(0,l.jsx)(n,{value:a,onChange:t,type:s,placeholder:r,id:c,name:o,className:d,labelClassName:u,disabled:m,required:x,onBlur:h,label:f,hideLabel:p,rightElement:g,autoComplete:v,showLogo:b})})}}}]);